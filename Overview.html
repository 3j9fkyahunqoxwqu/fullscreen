<!DOCTYPE html><html lang="en-US"><head>
  <meta charset="UTF-8">
  <title>Fullscreen</title>
  <style>
   pre.idl { border:solid thin; background:#eee; color:#000; padding:0.5em 1em }
   pre.idl :link, pre.idl :visited { color:inherit; background:transparent }
   pre code { color:inherit; background:transparent }
   pre.css { border: solid 0.0625em; background: #FFFFEE; color: black; padding: 0.5em 1em; }
   .example { margin-left:1em; padding-left:1em; border-left:double; color:#222; background:#fcfcfc }
   .note { margin-left:2em; font-weight:bold; font-style:italic; color:#008000 }
   p.note::before { content:"Note: " }
   .XXX { padding:.5em; border:solid #f00 }
   p.XXX::before { content:"Issue: " }
   dl.switch { padding-left:2em }
   dl.switch > dt { text-indent:-1.5em }
   dl.switch > dt:before { content:'\21AA'; padding:0 0.5em 0 0; display:inline-block; width:1em; text-align:right; line-height:0.5em }
   dl.domintro { color: green; margin: 2em 0 2em 2em; padding: 0.5em 1em; border: none; background: #DDFFDD; }
   dl.domintro dt, dl.domintro dt * { color: black; text-decoration: none; }
   dl.domintro dd { margin: 0.5em 0 1em 2em; padding: 0; }
   dl.domintro dd p { margin: 0.5em 0; }
   dl.domintro:before { display: table; margin: -1em -0.5em -0.5em auto; width: auto; content: 'This box is non-normative. Implementation requirements are given below this box.'; color: red; border: solid 2px; background: white; padding: 0 0.25em; }
   em.ct { text-transform:lowercase; font-variant:small-caps; font-style:normal }
   dfn { font-weight:bold; font-style:normal }
   code { color:orangered }
   code :link, code :visited { color:inherit }
   hr:not(.top) { display:block; background:none; border:none; padding:0; margin:2em 0; height:auto }
   table { border-collapse:collapse; border-style:hidden hidden none hidden }
   table thead { border-bottom:solid }
   table tbody th:first-child { border-left:solid }
   table td, table th { border-left:solid; border-right:solid; border-bottom:solid thin; vertical-align:top; padding:0.2em }

   .warning { color: red; background: transparent; font-weight: bolder; font-style: italic; }
   .warning p:first-child { margin-top: 0; }
   .warning p:last-child { margin-bottom: 0; }
   .warning:before { font-style: normal; }
   p.warning:before { content: '\26A0 Warning! '; }

   @media print {
     [data-anolis-spec]::after { content:"[" attr(data-anolis-spec) "]"; font-size:.6em; vertical-align:super; text-transform:uppercase }
   }
  </style>
  <link class="dontpublish" href="http://www.whatwg.org/style/specification" rel="stylesheet">
  </head>
 <body>

<div class="head">
<h1>Fullscreen</h1>
 <h2 class="no-num no-toc" id="editors'-draft-21-december-2011">Editors' Draft 21 December 2011</h2>

 <dl>
  <dt>This Version:
  <dd class="dontpublish"><a href="http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html">http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html</a>
  <dt>Participate:</dt>
  <dd><a href="http://www.whatwg.org/mailing-list">whatwg@whatwg.org</a>
  <dd><a href="http://www.w3.org/Bugs/Public/enter_bug.cgi?product=Web%20Platform%20%28other%29&amp;component=Fullscreen">File a bug</a>
  <dd><a href="http://wiki.whatwg.org/wiki/IRC">IRC: #whatwg on Freenode</a>

  <dt>Editors:
  <dd class="vcard h-card"><a class="url u-url fn p-fn" href="http://annevankesteren.nl/" lang="nl">Anne van Kesteren</a>
    (<a class="org h-org" href="http://www.opera.com/">Opera Software ASA</a>)
    &lt;<a class="email u-email" href="mailto:annevk@opera.com">annevk@opera.com</a>&gt;

  <dd class="vcard h-card"><a class="url u-url fn p-fn" href="http://tantek.com/" lang="tr">Tantek &Ccedil;elik</a>
    (<a class="org h-org" href="http://www.mozilla.org/">Mozilla Foundation</a>)
    &lt;<a class="email u-email" href="mailto:tantek@cs.stanford.edu">tantek@cs.stanford.edu</a>&gt;
 </dl>

<p class="copyright"><a href="http://creativecommons.org/publicdomain/zero/1.0/" rel="license"><img alt="CC0" src="http://i.creativecommons.org/p/zero/1.0/80x15.png"></a>
To the extent possible under law, the editors have waived all copyright and
related or neighboring rights to this work. In addition, as of
21 December 2011, the editors have made this specification available
under the
<a href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0" rel="license">Open Web Foundation Agreement Version 1.0</a>,
which is available at
http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0.
<!-- XXX
When published on W3C TR, the following paragraph applies as well.
-->
<!-- XXX copyright-->
</div>

<hr class="top">

<h2 class="no-num no-toc" id="table-of-contents">Table of Contents</h2>

<!--begin-toc-->
<ol class="toc">
 <li><a href="#conformance"><span class="secno">1 </span>Conformance</a></li>
 <li><a href="#terminology"><span class="secno">2 </span>Terminology</a></li>
 <li><a href="#model"><span class="secno">3 </span>Model</a></li>
 <li><a href="#api"><span class="secno">4 </span>API</a></li>
 <li><a href="#ui"><span class="secno">5 </span>UI</a></li>
 <li><a href="#selectors-(:fullscreen-and-:fullscreen-ancestor)"><span class="secno">6 </span>Selectors (<code title="">:fullscreen</code> and <code title="">:fullscreen-ancestor</code>)</a></li>
 <li><a href="#rendering"><span class="secno">7 </span>Rendering</a></li>
 <li><a href="#security-and-privacy-considerations"><span class="secno">8 </span>Security and Privacy Considerations</a></li>
 <li><a class="no-num" href="#references">References</a>
  <ol class="toc">
   <li><a class="no-num" href="#normative-references">Normative references</a></ol></li>
 <li><a class="no-num" href="#acknowledgments">Acknowledgments</a></ol>
<!--end-toc-->



<h2 id="conformance"><span class="secno">1 </span>Conformance</h2>
<p>All diagrams, examples, and notes in this specification are
non-normative, as are all sections explicitly marked non-normative.
Everything else in this specification is normative.

<p>The key words "MUST", "MUST NOT", "REQUIRED", <!--"SHALL", "SHALL
NOT",--> "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
"OPTIONAL" in the normative parts of this specification are to be
interpreted as described in RFC2119. For readability, these words do
not appear in all uppercase letters in this specification.
<a href="#refsRFC2119">[RFC2119]</a>


<h2 id="terminology"><span class="secno">2 </span>Terminology</h2>

<p>Most terminology used in this specification is from the DOM and HTML.
<a href="#refsDOM">[DOM]</a>
<a href="#refsHTML">[HTML]</a>

<p>The term <dfn id="context-object">context object</dfn> means the object on which the method
or attribute being discussed was called. When the
<a href="#context-object">context object</a> is unambiguous, the term can be omitted.

<p>A <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#browsing-context">browsing context</a> <var title="">A</var>
is called a <dfn id="descendant-browsing-context">descendant browsing context</dfn> of a
<a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#browsing-context">browsing context</a> <var title="">B</var> if
and only if <var title="">B</var> is an
<a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#ancestor-browsing-context">ancestor browsing context</a> of
<var title="">A</var>.


<h2 id="model"><span class="secno">3 </span>Model</h2>

<p>The <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#task-source">task source</a> used by this
specification is the
<a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#user-interaction-task-source">user interaction task source</a>.

<p>All <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">documents</a>
have an associated <dfn id="fullscreen-enabled-flag">fullscreen enabled flag</dfn>,
<dfn id="fullscreen-element-stack">fullscreen element stack</dfn>.

<p>Unless otherwise stated the <a href="#fullscreen-enabled-flag">fullscreen enabled flag</a> is unset
and the <a href="#fullscreen-element-stack">fullscreen element stack</a> is empty.

<p class="note">HTML defines under what conditions the
<a href="#fullscreen-enabled-flag">fullscreen enabled flag</a> is set.
<a href="#refsHTML">[HTML]</a>
<!--
  not set for <iframe>, createDocument();
  set for <iframe allowfullscreen>
-->

<p>To <dfn id="fully-exit-fullscreen">fully exit fullscreen</dfn> act as if the
<code title="dom-Document-exitFullscreen"><a href="#dom-document-exitfullscreen">exitFullscreen()</a></code> method
was invoked on the
<a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>'s
<a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a> and
subsequently empty that
<a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a>'s
<a href="#fullscreen-element-stack">fullscreen element stack</a>.

<p class="note">Since a <code title="">fullscreenchange</code> event will be
dispatched regardless, emptying the <a href="#fullscreen-element-stack">fullscreen element stack</a>
per above is fine.

<p>If an <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a>
at the top of a <a href="#fullscreen-element-stack">fullscreen element stack</a> is removed from a
<a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a>,
<a href="#fully-exit-fullscreen">fully exit fullscreen</a>.
<!-- XXX reference DOM mutation -->


<h2 id="api"><span class="secno">4 </span>API</h2>

<pre class="idl">partial interface <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#element">Element</a> {
  void <a href="#dom-element-requestfullscreen" title="dom-Element-requestFullscreen">requestFullscreen</a>();
};

partial interface <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#document">Document</a> {
  readonly attribute boolean <a href="#dom-document-fullscreenenabled" title="dom-Document-fullscreenEnabled">fullscreenEnabled</a>;
  readonly attribute <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#element">Element</a> <a href="#dom-document-fullscreenelement" title="dom-Document-fullscreenElement">fullscreenElement</a>;

  void <a href="#dom-document-exitfullscreen" title="dom-Document-exitFullscreen">exitFullscreen</a>();
};</pre>

<p>The
<dfn id="dom-element-requestfullscreen" title="dom-Element-requestFullscreen"><code>requestFullscreen()</code></dfn>
method must run these steps:

<ol>
 <li>
  <p>If any of the following conditions are true, terminate these steps and
  <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#queue-a-task">queue a task</a> to
  <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire" title="concept-event-fire">fire an event</a>
  named <code>fullscreenerror</code> with its
  <code title="dom-Event-bubbles">bubbles</code> attribute set to true on the
  <a href="#context-object">context object</a>'s
  <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>:

  <ul>
   <li><p>The <a href="#context-object">context object</a> is not
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#in-a-document">in a document</a>.

   <li><p>The <a href="#context-object">context object</a>'s
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>, or an
   <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#ancestor-browsing-context">ancestor browsing context</a>'s
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a> does
   not have the <a href="#fullscreen-enabled-flag">fullscreen enabled flag</a> set.

   <li><p>The <a href="#context-object">context object</a>'s
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>
   <a href="#fullscreen-element-stack">fullscreen element stack</a> is not empty and its top
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> is not an
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-tree-ancestor" title="concept-tree-ancestor">ancestor</a> of
   the <a href="#context-object">context object</a>.

   <li><p>A <a href="#descendant-browsing-context">descendant browsing context</a>'s
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a> has a
   non-empty <a href="#fullscreen-element-stack">fullscreen element stack</a>.

   <li><p>This algorithm is not
   <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#allowed-to-show-a-pop-up">allowed to show a pop-up</a>.

   <li><p>There is a previously-established user preference, security risk,
   or platform limitation.
  </ul>

 <li><p>Let <var title="">doc</var> be <var title="">element</var>'s
 <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>.

 <li><p>Let <var title="">docs</var> be all <var title="">doc</var>'s
 <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#ancestor-browsing-context">ancestor browsing context</a>'s
 <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">documents</a> (if any)
 and <var title="">doc</var>.

 <li>
  <p>For each <var title="">document</var> in <var title="">docs</var>, run these
  substeps:

  <ol>
   <li><p>Let <var title="">following document</var> be the
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a> after
   <var title="">document</var> in <var title="">docs</var>, or null if there is
   no such document.

   <li><p>If <var title="">following document</var> is null, push
   <a href="#context-object">context object</a> on
   <var title="">document</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a>, and
   <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#queue-a-task">queue a task</a> to
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire" title="concept-event-fire">fire an event</a>
   named <code>fullscreenchange</code> with its
   <code title="dom-Event-bubbles">bubbles</code> attribute set to true on the
   <var title="">document</var>.

   <li><p>Otherwise, if <var title="">document</var>'s
   <a href="#fullscreen-element-stack">fullscreen element stack</a> is either empty or its top
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> is not
   <var title="">following document</var>'s
   <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#browsing-context-container">browsing context container</a>, push
   <var title="">following document</var>'s
   <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#browsing-context-container">browsing context container</a> on
   <var title="">document</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a>, and
   <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#queue-a-task">queue a task</a> to
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire" title="concept-event-fire">fire an event</a>
   named <code>fullscreenchange</code> with its
   <code title="dom-Event-bubbles">bubbles</code> attribute set to true on
   <var title="">document</var>.

   <li><p>Otherwise, do nothing for this <var title="">document</var>. It stays
   the same.
  </ol>

 <li><p>Return, and run the remaining steps asynchronously.

 <li><p>Optionally, perform some animation.

 <li><p>Optionally, display a message indicating how the user can exit
 displaying the <a href="#context-object">context object</a> fullscreen.
</ol>

<p>The
<dfn id="dom-document-fullscreenenabled" title="dom-Document-fullscreenEnabled"><code>fullscreenEnabled</code></dfn>
attribute must return true if the <a href="#context-object">context object</a> and all
<a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#ancestor-browsing-context">ancestor browsing context</a>'s
<a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">documents</a> have
their <a href="#fullscreen-enabled-flag">fullscreen enabled flag</a> set and the
<a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>'s
<a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a>'s
<span>fullscreen element</span> is null, or false otherwise.

<p>The <dfn id="dom-document-fullscreenelement" title="dom-Document-fullscreenElement"><code>fullscreenElement</code></dfn>
attribute must return the top
<a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> of the
<a href="#context-object">context object</a>'s
<a href="#fullscreen-element-stack">fullscreen element stack</a>, or null otherwise.

<p>The
<dfn id="dom-document-exitfullscreen" title="dom-Document-exitFullscreen"><code>exitFullscreen()</code></dfn>
method must run these steps:

<ol>
 <li><p>Let <var title="">doc</var> be the <a href="#context-object">context object</a>.

 <li><p>If <var title="">doc</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a> is
 empty, terminate these steps.

 <li><p>Let <var title="">descendants</var> be all the <var title="">doc</var>'s
 <a data-anolis-spec="html" href="#descendant-browsing-context">descendant browsing context</a>'s
 <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">documents</a> with a
 non-empty <a href="#fullscreen-element-stack">fullscreen element stack</a> (if any), ordered so that
 the child of the <var title="">doc</var> is last and the
 <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a> furthest
 away from the <var title="">doc</var> is first.
 <!-- XXX order terminology -->

 <li><p>For each <var title="">descendant</var> in
 <var title="">descendants</var>, empty
 <var title="">descendant</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a>, and
 <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#queue-a-task">queue a task</a> to
 <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire" title="concept-event-fire">fire an event</a>
 named <code>fullscreenchange</code> with its
 <code title="dom-Event-bubbles">bubbles</code> attribute set to true on
 <var title="">descendant</var>.

 <li>
  <p>While <var title="">doc</var> is not null, run these substeps:

  <ol>
   <li>
    <p>Pop the top
    <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> of
    <var title="">doc</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a>.

    <p>If <var title="">doc</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a> is
    non-empty and the
    <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> now at
    the top is either not <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#in-a-document">in a document</a> or
    its
    <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>
    is not <var title="">doc</var>, repeat this substep.

    <p class="note">This is needed because a non-top
    <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> in the
    <a href="#fullscreen-element-stack">fullscreen element stack</a> could have been removed from
    <var title="">doc</var>.

   <li><p><a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#queue-a-task">Queue a task</a> to
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire" title="concept-event-fire">fire an event</a>
   named <code>fullscreenchange</code> with its
   <code title="dom-Event-bubbles">bubbles</code> attribute set to true on
   <var title="">doc</var>.

   <li><p>If <var title="">doc</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a> is
   empty and <var title="">doc</var>'s <span>browsing context</span> has a
   <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#browsing-context-container">browsing context container</a>, set
   <var title="">doc</var> to that
   <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#browsing-context-container">browsing context container</a>'s
   <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>.

   <li><p>Otherwise, set <var title="">doc</var> to null.
  </ol>

 <li><p>Return, and run the remaining steps asynchronously.

 <li><p>Optionally, perform some animation.
</ol>

<h2 id="ui"><span class="secno">5 </span>UI</h2>

<p>User agents are encouraged to implement native media fullscreen controls
in terms of
<code title="dom-Element-requestFullscreen"><a href="#dom-element-requestfullscreen">requestFullscreen()</a></code> and
<code title="dom-Document-exitFullscreen"><a href="#dom-document-exitfullscreen">exitFullscreen()</a></code>.

<p>If the end user instructs the user agent to end a fullscreen session
initiated via
<code title="dom-Element-requestFullscreen"><a href="#dom-element-requestfullscreen">requestFullscreen()</a></code>,
<a href="#fully-exit-fullscreen">fully exit fullscreen</a>.

<h2 id="selectors-(:fullscreen-and-:fullscreen-ancestor)"><span class="secno">6 </span>Selectors (<code title="">:fullscreen</code> and <code title="">:fullscreen-ancestor</code>)</h2>

<p>The <dfn id="css-pc-fullscreen" title="css-pc-fullscreen"><code>:fullscreen</code></dfn>
pseudo-class must match the top
<a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> of the
<a href="#context-object">context object</a>'s
<a href="#fullscreen-element-stack">fullscreen element stack</a> (if any).

<p>The
<dfn id="css-pc-fullscreen-ancestor" title="css-pc-fullscreen-ancestor"><code>:fullscreen-ancestor</code></dfn>
pseudo-class must match all
<a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">elements</a> that are
<a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-tree-ancestor" title="concept-tree-ancestor">ancestors</a> of
the top
<a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> of the
<a href="#context-object">context object</a>'s
<a href="#fullscreen-element-stack">fullscreen element stack</a> (if any).

<h2 id="rendering"><span class="secno">7 </span>Rendering</h2>

<p>This section is to be interpreted equivalently to the Rendering section
of HTML.
<a href="#refsHTML">[HTML]</a>

<p>However, unlike the HTML specification, the CSS rules given below are to
be put between "author normal declarations" and
"author important declarations" in the cascading order.
<a href="#refsCSS">[CSS]</a>

<pre class="css">:fullscreen {
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  z-index:2147483647;
  box-sizing:border-box;
  margin:0;
  width:100%;
  height:100%;
}
/* If there is a fullscreen element that is not the root then
   we should hide the viewport scrollbar. */
:fullscreen-ancestor:root {
  overflow:hidden;
}
:fullscreen-ancestor {
  /* Ancestors of a fullscreen element should not induce stacking contexts
     that would prevent the fullscreen element from being on top. */
  z-index:auto;
  /* Ancestors of a fullscreen element should not be partially transparent,
     since that would apply to the fullscreen element and make the page visible
     behind it. It would also create a pseudo-stacking-context that would let content
     draw on top of the fullscreen element. */
  opacity:1;
  /* Ancestors of a fullscreen element should not apply SVG masking, clipping, or
     filtering, since that would affect the fullscreen element and create a pseudo-
     stacking context. */
  mask:none;
  clip:auto;
  filter:none;
  transform:none;
  transition:none;
}</pre> <!-- XXX clean up comments at some point -->

<p>The following CSS rules do apply at "user agent declarations" in the
cascading order.

<pre class="css">:fullscreen {
  background:black;
  color:white;
}</pre>

<p class="XXX">The HTML <code>&lt;dialog modal&gt;</code> feature faces the same
rendering issues. We should find a unified model that also addresses what
happens if you go fullscreen from a modal dialog or if you have a modal
dialog while fullscreen.



<h2 id="security-and-privacy-considerations"><span class="secno">8 </span>Security and Privacy Considerations</h2>

<p>User agents should ensure, e.g. by means of an overlay, that the end user
is aware something is displayed fullscreen. User agents should provide a
means of exiting fullscreen that always works and advertise this to the
user. This is to prevent a site from spoofing the end user by recreating the
user agent or even operating system environment when fullscreen. See also
the definition of
<code title="dom-Element-requestFullscreen"><a href="#dom-element-requestfullscreen">requestFullscreen()</a></code>.

<p>To prevent embedded content from going fullscreen only embedded content
specifically allowed via the <code>allowfullscreen</code> attribute of the
HTML <code>iframe</code> element will be able to go fullscreen. This
prevents untrusted content from going fullscreen.



<h2 class="no-num" id="references">References</h2>
<h3 class="no-num" id="normative-references">Normative references</h3>
<div id="anolis-references-normative"><dl><dt id="refsCSS">[CSS]
<dd><cite><a href="http://www.w3.org/TR/CSS2/">CSS</a></cite>, Bert Bos, Tantek &Ccedil;elik, Ian Hickson et al.. W3C.

<dt id="refsDOM">[DOM]
<dd><cite><a href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html">DOM4</a></cite>, Anne van Kesteren, Aryeh Gregor and Ms2ger. W3C.

<dt id="refsHTML">[HTML]
<dd><cite><a href="http://www.whatwg.org/html">HTML</a></cite>, Ian Hickson. WHATWG.

<dt id="refsRFC2119">[RFC2119]
<dd><cite><a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a></cite>, Scott Bradner. IETF.

</dl></div>


<!--<h3 class=no-num>Informative references</h3>
<div id=anolis-references-informative></div>-->



<h2 class="no-num" id="acknowledgments">Acknowledgments</h2>

<p>Many thanks to Robert O'Callahan for designing the initial model and his
useful comments.</p>
<!-- https://wiki.mozilla.org/Gecko:FullScreenAPI -->

<p>Thanks to
Chris Pearce,
Darin Fisher,
Glenn Maynard,
Jo&atilde;o Eiras,
Josh Soref,
Rune Lillesveen, and
Sigbj&oslash;rn Vik

for their useful comments.</p>


<script class="dontpublish" id="head" src="http://www.whatwg.org/specs/web-apps/current-work/dfn.js"></script>
